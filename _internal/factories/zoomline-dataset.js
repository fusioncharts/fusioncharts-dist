import{datasetFactory,pluckNumber,pluck}from'../lib/lib';let PIPE='|';export default function(a){let b,c,d,e,f,g,h,k,l=a.getFromEnv('dataSource'),m=l.chart||{},n=a.config,o=l.dataset,p=a.getChildren(),q=p.canvas[0],r=q.getChildren('vCanvas')[0];for(n.cdm=b=pluckNumber(m.compactdatamode,0),n.cdmchar=c=pluck(m.dataseparator,PIPE),o||a.setChartMessage(),e=0;e<o.length;e++)if(d=o[e],b&&d.data&&d.data.split){for(h=d.data.split(c),f=[],(g=0,k=h.length);g<k;g++)f.push({value:h[g]});d.data=f}datasetFactory(r,a.getDSdef(),'dataset',o.length,o),a.iterateComponents(a=>{a.getType&&'dataset'===a.getType()&&a.createPinElem&&a.addEventListener('createpinelements',a.createPinElem)})}